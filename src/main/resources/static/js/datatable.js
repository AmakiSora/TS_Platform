$(function(){$(".js-basic-example").DataTable();$(".js-exportable").DataTable({dom:"Bfrtip",buttons:["copy","csv","excel","pdf","print"]});function b(c){return'<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;"><tr><td>Full name:</td><td>'+c.name+"</td></tr><tr><td>Extension number:</td><td>"+c.extn+"</td></tr><tr><td>Extra info:</td><td>And any further details here (images etc)...</td></tr></table>"}$(document).ready(function(){var c=$("#example").DataTable({ajax:"assets/data/objects.txt",columns:[{className:"details-control",orderable:false,data:null,defaultContent:""},{data:"name"},{data:"position"},{data:"office"},{data:"salary"}],order:[[1,"asc"]]});$("#example tbody").on("click","td.details-control",function(){var e=$(this).closest("tr");var d=c.row(e);if(d.child.isShown()){d.child.hide();e.removeClass("shown")}else{d.child(b(d.data())).show();e.addClass("shown")}})});var a={options:{addButton:"#addToTable",table:"#addrowExample",dialog:{}},initialize:function(){this.setVars().build().events()},setVars:function(){return this.$table=$(this.options.table),this.$addButton=$(this.options.addButton),this.dialog={},this.dialog.$wrapper=$(this.options.dialog.wrapper),this.dialog.$cancel=$(this.options.dialog.cancelButton),this.dialog.$confirm=$(this.options.dialog.confirmButton),this},build:function(){return this.datatable=this.$table.DataTable({aoColumns:[null,null,null,{bSortable:!1}],}),window.dt=this.datatable,this},events:function(){var c=this;return this.$table.on("click","button.button-save",function(d){d.preventDefault(),c.rowSave($(this).closest("tr"))}).on("click","button.button-discard",function(d){d.preventDefault(),c.rowCancel($(this).closest("tr"))}).on("click","button.button-edit",function(d){d.preventDefault(),c.rowEdit($(this).closest("tr"))}).on("click","button.button-remove",function(f){f.preventDefault();var d=$(this).closest("tr");swal({title:"Are you sure?",text:"You will not be able to recover this imaginary file!",type:"warning",showCancelButton:true,confirmButtonColor:"#dc3545",confirmButtonText:"Yes, delete it!",closeOnConfirm:false},function(){c.rowRemove(d);swal("Deleted!","Your imaginary file has been deleted.","success")})}),this.$addButton.on("click",function(d){d.preventDefault(),c.rowAdd()}),this.dialog.$cancel.on("click",function(d){d.preventDefault(),$.magnificPopup.close()}),this},rowAdd:function(){this.$addButton.attr({disabled:"disabled"});var d,e,c;d=['<button class="btn btn-sm btn-icon btn-pure btn-default on-editing button-save" data-toggle="tooltip" data-original-title="Save" hidden><i class="icon-drawer" aria-hidden="true"></i></button>','<button class="btn btn-sm btn-icon btn-pure btn-default on-editing button-discard" data-toggle="tooltip" data-original-title="Discard" hidden><i class="icon-close" aria-hidden="true"></i></button>','<button class="btn btn-sm btn-icon btn-pure btn-default on-default button-edit" data-toggle="tooltip" data-original-title="Edit"><i class="icon-pencil" aria-hidden="true"></i></button>','<button class="btn btn-sm btn-icon btn-pure btn-default on-default button-remove" data-toggle="tooltip" data-original-title="Remove"><i class="icon-trash" aria-hidden="true"></i></button>'].join(" "),e=this.datatable.row.add(["","","",d]),(c=this.datatable.row(e[0]).nodes().to$()).addClass("adding").find("td:last").addClass("actions"),this.rowEdit(c),this.datatable.order([0,"asc"]).draw()},rowCancel:function(d){var c,e;d.hasClass("adding")?this.rowRemove(d):((c=d.find("td.actions")).find(".button-discard").tooltip("hide"),c.get(0)&&this.rowSetActionsDefault(d),e=this.datatable.row(d.get(0)).data(),this.datatable.row(d.get(0)).data(e),this.handleTooltip(d),this.datatable.draw())},rowEdit:function(c){var d,e=this;d=this.datatable.row(c.get(0)).data(),c.children("td").each(function(g){var f=$(this);f.hasClass("actions")?e.rowSetActionsEditing(c):f.html('<input type="text" class="form-control input-block" value="'+d[g]+'"/>')})},rowSave:function(d){var c,e=this,f=[];d.hasClass("adding")&&(this.$addButton.removeAttr("disabled"),d.removeClass("adding")),f=d.find("td").map(function(){var g=$(this);return g.hasClass("actions")?(e.rowSetActionsDefault(d),e.datatable.cell(this).data()):$.trim(g.find("input").val())}),(c=d.find("td.actions")).find(".button-save").tooltip("hide"),c.get(0)&&this.rowSetActionsDefault(d),this.datatable.row(d.get(0)).data(f),this.handleTooltip(d),this.datatable.draw()},rowRemove:function(c){c.hasClass("adding")&&this.$addButton.removeAttr("disabled"),this.datatable.row(c.get(0)).remove().draw()},rowSetActionsEditing:function(c){c.find(".on-editing").removeAttr("hidden"),c.find(".on-default").attr("hidden",!0)},rowSetActionsDefault:function(c){c.find(".on-editing").attr("hidden",!0),c.find(".on-default").removeAttr("hidden")},handleTooltip:function(c){c.find('[data-toggle="tooltip"]').tooltip()}};$(function(){a.initialize()})});